{% extends 'base.html' %}

{% set is_create = (view_type == 'create') %}
{% block title %}
  {{ last_name|capitalize }} {{ name|capitalize }} {{ patronymic|capitalize }} |
  {% if is_create %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ{% else %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{% endif %} –∑–∞–ø–∏—Å–∏ –æ –ø–æ–≤–µ—Ä–∫–µ
{% endblock %}

{% block content %}
  <h1 class="fs-xl d-flex flex-column align-items-center mb-4">

    {# –ª–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏ #}
    {% if company_image %}
      <div class="photo mb-3">
        <img src="data:image/jpeg;base64,{{ company_image }}"
             alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: {{ company_name }}">
      </div>
    {% endif %}
    <div class="btn-group mb-3">
      <a href="/companies/equipment-informations?company_id={{company_id}}&equipment_id={{equipment_id}}"
          class="btn btn-outline-secondary label-text fw-bold"
        style="border-width: 3px;">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
      <a href="/companies/company?company_id={{company_id}}"
          class="btn btn-outline-dark label-text fw-bold"
        style="border-width: 3px;">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
    {% if is_create %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ{% else %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{% endif %} –∑–∞–ø–∏—Å–∏ –æ –ø–æ–≤–µ—Ä–∫–µ
  </h1>

  <div class="card p-4 mb-5">
    <form
      id="equipment-information-form"
      method="{% if is_create %}POST{% else %}PUT{% endif %}"
      action="
      {% if is_create %}
        /companies/api/equipment-informations/create?company_id={{company_id}}&equipment_id={{equipment_id}}&type_verif=verification
      {% else %}
        /companies/api/equipment-informations/update?company_id={{company_id}}&equipment_id={{equipment_id}}&equipment_info_id={{equipment_info.id}}
      {% endif %}">

      <div class="mb-3">
        <label for="date_from" class="form-label label-text"><b>–î–∞—Ç–∞ –ø–æ–≤–µ—Ä–∫–∏</b></label>
        <input type="date"
               id="date_from"
               name="date_from"
               class="form-control input-text text-center"
               value="{{ equipment_info.date_from|strftime('%Y-%m-%d') if not is_create else '' }}">
      </div>

      <div class="mb-3">
        <label for="date_to" class="form-label label-text"><b>–ü–æ–≤–µ—Ä–∫–∞¬†–¥–æ</b></label>
        <input type="date"
               id="date_to"
               name="date_to"
               class="form-control input-text text-center"
               value="{{ equipment_info.date_to|strftime('%Y-%m-%d') if not is_create else '' }}">
      </div>

      <div class="mb-3">
        <label for="info" class="form-label label-text"><b>‚Ññ‚ÄØ—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–∞</b></label>
        <input type="text"
               id="info"
               name="info"
               class="form-control input-text text-center"
               value="{{ equipment_info.info if not is_create else '' }}"
               required>
      </div>

      <div class="d-flex justify-content-end">
        <button type="submit" class="btn btn-outline-success label-text fw-bold"
        style="border-width: 3px;">
          ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        </button>
      </div>
  </form>
</div>

<script>
  window.companyId = {{ company_id }};
  window.equipmentId = {{ equipment_id }};
  window.isCreate = {{ is_create|tojson }};
  {% if not is_create %}
  window.equipmentInfoId = {{ equipment_info.id }};
  {% endif %}
</script>
<script type="module" src="/static/company/equipment_informations/js/update_or_create_v.js"></script>

{% endblock %}