{% extends 'base.html' %}

{% block title %}
  {{ last_name|capitalize }} {{ name|capitalize }} {{ patronymic|capitalize }} | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏
{% endblock %}

{% block content %}
  <h1 class="fs-xl d-flex flex-column align-items-center mb-4">
    {% if company_image %}
      <div class="photo mb-3">
        <img src="data:image/jpeg;base64,{{ company_image }}"
             alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: {{ company_name }}">
      </div>
    {% endif %}
    
    <div class="btn-group mb-3">
      <a href="/companies/equipments?company_id={{company_id}}"
         class="btn btn-outline-secondary label-text fw-bold" style="border-width: 3px;">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
      <a href="/companies/company?company_id={{company_id}}"
         class="btn btn-outline-dark label-text fw-bold" style="border-width: 3px;">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>

    –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–∏: {{ equipment.name }}
  </h1>

  {% if equipment %}
    {# --- –∫–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å --- #}
    <div class="d-flex justify-content-between mb-4">
      <a href="/companies/equipment-informations/create?company_id={{company_id}}&equipment_id={{equipment.id}}&type_verif=maintenance"
         class="btn btn-outline-primary w-50 me-2 label-text fw-bold"
         style="border-width: 3px;">‚ûï¬†–¢–û</a>

      {% if equipment.type != 'auxiliary' %}
        <a href="/companies/equipment-informations/create?company_id={{company_id}}&equipment_id={{equipment.id}}&type_verif=verification"
           class="btn btn-outline-primary w-50 ms-2 label-text fw-bold"
           style="border-width: 3px;">‚ûï¬†–ü–æ–≤–µ—Ä–∫–∞</a>
      {% endif %}
    </div>

    {# --- —Ç–∞–±–ª–∏—Ü—ã --- #}
    <div class="row g-4 mb-5">
      <div class="col-xl-6">
        <div class="card p-3">
          <h5 class="label-text mb-3"><b>–¢–µ—Ö. –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ</b></h5>
          <div class="table-responsive">
            <table class="table table-bordered table-striped label-text text-center align-middle">
              <thead class="table-dark">
                <tr><th>#</th><th>#</th><th>–î–∞—Ç–∞</th><th>–î–æ</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr>
              </thead>
              <tbody>
                {% for rec in equipment.equipment_info if rec.type=='maintenance' %}
                  <tr>
                    <td>
                      <a class="btn btn-outline-warning" style="border-width: 3px;" 
                      href="/companies/equipment-informations/update?
                      company_id={{company_id}}&
                      equipment_id={{equipment_id}}&
                      type_verif=maintenance&
                      equipment_info_id={{rec.id}}">üîÑ</a>
                    </td>
                    <td>
                      <a class="btn btn-outline-danger" style="border-width: 3px;" href=""
                         onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å –¢–û id {{ rec.id }}?');">üóëÔ∏è</a>
                    </td>
                    <td>{{ rec.date_from.strftime('%d.%m.%Y') }}</td>
                    <td>{{ rec.date_to.strftime('%d.%m.%Y') }}</td>
                    <td>{{ rec.info }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

      {# –ü–æ–≤–µ—Ä–∫–∏ –≤—ã–≤–æ–¥–∏–º, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –Ω–µ ¬´–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–µ¬ª #}
      {% if equipment.type != 'auxiliary' or equipment.type != 'other' %}
      <div class="col-xl-6">
        <div class="card p-3">
          <h5 class="label-text mb-3"><b>–ü–æ–≤–µ—Ä–∫–∏</b></h5>
          <div class="table-responsive">
            <table class="table table-bordered table-striped label-text text-center align-middle">
              <thead class="table-dark">
                <tr><th>#</th><th>#</th><th>–î–∞—Ç–∞</th><th>–î–æ</th><th>‚Ññ‚ÄØ—Å–≤-–≤–∞</th></tr>
              </thead>
              <tbody>
                {% for rec in equipment.equipment_info if rec.type=='verification' %}
                  <tr>
                    <td>
                      <a
                        class="btn btn-outline-warning"
                        style="border-width: 3px;"
                        href="/companies/equipment-informations/update?
                          company_id={{company_id}}&
                          equipment_id={{equipment_id}}&
                          type_verif=verification&
                          equipment_info_id={{rec.id}}">üîÑ</a>
                    </td>
                    <td>
                      <a class="btn btn-outline-danger" style="border-width: 3px;" href=""
                         onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å –ø–æ–≤–µ—Ä–∫–∏ id {{ rec.id }}?');">üóëÔ∏è</a>
                    </td>
                    <td>{{ rec.date_from.strftime('%d.%m.%Y') }}</td>
                    <td>{{ rec.date_to.strftime('%d.%m.%Y') }}</td>
                    <td>{{ rec.info }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  {% endif %}
{% endblock %}
